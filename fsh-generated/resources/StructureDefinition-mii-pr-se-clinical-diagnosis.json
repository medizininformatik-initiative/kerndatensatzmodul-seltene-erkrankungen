{
  "resourceType": "StructureDefinition",
  "id": "mii-pr-se-clinical-diagnosis",
  "extension": [
    {
      "url": "https://www.medizininformatik-initiative.de/fhir/modul-meta/StructureDefinition/mii-ex-meta-license-codeable",
      "valueCodeableConcept": {
        "coding": [
          {
            "system": "http://hl7.org/fhir/spdx-license",
            "code": "CC-BY-4.0",
            "display": "Creative Commons Attribution 4.0 International"
          }
        ]
      }
    }
  ],
  "url": "https://www.medizininformatik-initiative.de/fhir/ext/modul-seltene/StructureDefinition/mii-pr-se-clinical-diagnosis",
  "version": "2026.0.0-ballot",
  "name": "MII_PR_SE_ClinicalDiagnosis",
  "title": "MII PR SE Clinical Diagnosis",
  "status": "draft",
  "publisher": "Medizininformatik Initiative",
  "contact": [
    {
      "telecom": [
        {
          "system": "url",
          "value": "https://www.medizininformatik-initiative.de"
        }
      ]
    }
  ],
  "description": "Profile for clinical diagnosis of rare diseases with HPO phenotype codes. This profile is used for clinically diagnosed rare diseases based on phenotypic presentation.",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Condition",
  "baseDefinition": "https://www.medizininformatik-initiative.de/fhir/core/modul-diagnose/StructureDefinition/Diagnose",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Condition.category",
        "path": "Condition.category",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Condition.severity",
        "path": "Condition.severity",
        "mustSupport": true
      },
      {
        "id": "Condition.code.coding:hpo",
        "path": "Condition.code.coding",
        "sliceName": "hpo",
        "short": "HPO Phenotype code",
        "definition": "Human Phenotype Ontology code describing the phenotypic manifestation of the rare disease",
        "comment": "For rare diseases, HPO codes should be provided to describe the phenotypic presentation",
        "min": 0,
        "max": "*",
        "patternCoding": {
          "system": "http://hpo.jax.org/app/"
        },
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "https://www.medizininformatik-initiative.de/fhir/ext/modul-seltene/ValueSet/mii-vs-se-hpo-phenotypic-observation-codes"
        }
      },
      {
        "id": "Condition.code.coding:hpo.system",
        "path": "Condition.code.coding.system",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Condition.code.coding:hpo.code",
        "path": "Condition.code.coding.code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Condition.code.coding:hpo.display",
        "path": "Condition.code.coding.display",
        "mustSupport": true
      },
      {
        "id": "Condition.abatement[x]",
        "path": "Condition.abatement[x]",
        "mustSupport": true
      },
      {
        "id": "Condition.recorder",
        "path": "Condition.recorder",
        "mustSupport": true
      },
      {
        "id": "Condition.asserter",
        "path": "Condition.asserter",
        "mustSupport": true
      },
      {
        "id": "Condition.stage",
        "path": "Condition.stage",
        "mustSupport": true
      },
      {
        "id": "Condition.stage.assessment",
        "path": "Condition.stage.assessment",
        "short": "Reference to HPO-based severity assessment",
        "mustSupport": true
      },
      {
        "id": "Condition.stage.type",
        "path": "Condition.stage.type",
        "short": "Stage type (e.g., severity, progression)",
        "mustSupport": true
      },
      {
        "id": "Condition.evidence",
        "path": "Condition.evidence",
        "mustSupport": true
      },
      {
        "id": "Condition.evidence.code",
        "path": "Condition.evidence.code",
        "short": "Manifestation/symptom supporting the diagnosis",
        "mustSupport": true
      },
      {
        "id": "Condition.evidence.code.coding",
        "path": "Condition.evidence.code.coding",
        "binding": {
          "strength": "extensible",
          "valueSet": "https://www.medizininformatik-initiative.de/fhir/ext/modul-seltene/ValueSet/mii-vs-se-hpo-phenotypic-observation-codes"
        }
      },
      {
        "id": "Condition.evidence.detail",
        "path": "Condition.evidence.detail",
        "short": "Reference to Observation resources containing HPO-coded symptoms",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Observation"
            ]
          }
        ],
        "mustSupport": true
      }
    ]
  }
}
